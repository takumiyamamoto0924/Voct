version: "3"

tasks:
  default:
    desc: 利用可能なタスク一覧を表示する
    silent: true
    cmds:
      - task --list

  app:run:
    desc: アプリを実行する
    cmds:
      - uv run voct

  app:debug:
    desc: デバッグモードでアプリを実行する
    cmds:
      - uv run python -m voct

  test:
    desc: 全テストを実行する
    cmds:
      - uv run --extra dev pytest tests/ -v

  test:watch:
    desc: テストをファイル変更時に自動実行する
    cmds:
      - uv run --extra dev pytest tests/ -v --tb=short -x

  lint:
    desc: リンターを実行する
    cmds:
      - uv run ruff check src/ tests/

  lint:fix:
    desc: リンターで自動修正する
    cmds:
      - uv run ruff check src/ tests/ --fix

  format:
    desc: コードをフォーマットする
    cmds:
      - uv run ruff format src/ tests/

  format:check:
    desc: フォーマットの差分を確認する
    cmds:
      - uv run ruff format src/ tests/ --check

  setup:
    desc: 開発環境をセットアップする
    cmds:
      - uv sync --extra dev
